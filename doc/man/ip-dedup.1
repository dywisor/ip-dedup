.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "IP-DEDUP" "1" "" "Version 0.9" "ip-dedup"
.hy
.SH NAME
.PP
\f[B]ip-dedup\f[R] \[em] deduplicate/aggregate IPv4/IPv6
addresses/networks
.SH SYNOPSIS
.PP
\f[B]ip-dedup\f[R] [\f[B]-4\f[R]|\f[B]-6\f[R]|\f[B]-a\f[R]]
[\f[B]-B\f[R] \f[I]n\f[R]] [\f[B]-C\f[R] \f[I]n\f[R]|\f[B]-c\f[R]]
[\f[B]-D\f[R] \f[I]dir\f[R]] [\f[B]-i\f[R]] [\f[B]-k\f[R]]
[\f[B]-l\f[R]]
.PD 0
.P
.PD
\ \ \ \ \ \ \ \ \ [\f[B]-o\f[R] \f[I]file\f[R]] [\f[B]-p\f[R]
\f[I]file\f[R]] [\f[B]-r\f[R]] [\f[B]-s\f[R]] [\f[I]file\f[R]\&...]
.PD 0
.P
.PD
\f[B]ip-dedup\f[R] \f[B]-L\f[R]
.PD 0
.P
.PD
\f[B]ip-dedup\f[R] \f[B]-h\f[R]
.SH DESCRIPTION
.PP
Merges and aggregates IPv4/IPv6 addresses/networks and writes the
resulting networks in / notation to stdout.
Networks can be excluded from the final result by using the purge
option.
.PP
The output will be sorted.
When operating in mixed mode, IPv4 networks will be written before any
IPv6 networks.
.PP
Input networks are read from stdin or the given files.
The input format is one network address per line, optionally followed by
a slash char `/' and a prefixlen.
If omitted, the prefixlen is guessed based on the number of non-zero
blocks in the network address.
.PP
Input and exclude file names starting with a `\[at]' char are looked up
in the data directory after removing the prefix char.
.PP
For each line in the input files, leading and trailing whitespace is
removed.
Empty lines, possibly caused by this conversion, are silently ignored.
Likewise, lines starting with a `#' char are ignored, too.
.PP
The keep-going mode (-k) allows for invalid input.
However, if no input network specification could be parsed but at least
one was seen, then ip-dedup exits non-zero (65).
This rule applies to each individual input file.
.SS Options
.TP
-4
\f[I]IPv4-mode\f[R] - networks get parsed as IPv4 addresses
.TP
-6
\f[I]IPv6-mode\f[R] - networks get parsed as IPv6 addresses
.TP
-a
(automatic) \f[I]mixed-mode\f[R] - all networks get parsed as both IPv4
and IPv6 addresses on a best-effort basis
.RS
.PP
This is the default mode if neither \f[B]-4\f[R] nor \f[B]-6\f[R] are
specified.
.PP
At least one parse attempt must succeed, otherwise the input is
considered to be invalid.
If a network can be parsed as both IPv4 and IPv6 address (e.g.\ 0/0),
then both addresses will be used.
.RE
.TP
-B \f[I]n\f[R]
truncate IPv4 networks if they exceed the given prefix length
.TP
-C \f[I]n\f[R]
truncate IPv6 networks if they exceed the given prefix length
.TP
-c
truncate IPv6 networks with a prefixlen greater than 64 to /64 network
addresses (same as \f[B]-C\f[R] 64)
.TP
-D \f[I]dir\f[R]
look up all following \f[I]datadir files\f[R] in the given directory
.TP
-h
print the help message and exit
.TP
-i
invert so that all networks except the input ones appear in the output
.RS
.PP
The resulting network addresses are subject to purging (\f[B]-p\f[R]).
.RE
.TP
-k
keep going - skip invalid lines in input instead of exiting
.TP
-L
list include files found in the default \f[I]datadir\f[R]
.TP
-l
enable long output format:
.RS
.IP \[bu] 2
IPv6 addresses will be written in their full-length form
(\f[I]IPv6-mode\f[R] only)
.RE
.TP
-o \f[I]file\f[R]
write output to a file instead of stdout
.TP
-p \f[I]file\f[R]
purge - exclude certain networks from appearing in the output
.RS
.PP
The excludes will be read from the given file.
This option may be specified more than once.
.RE
.TP
-r
enable reduced address output format:
.RS
.PP
Removes the prefix-length suffix for complete IP addresses
(\[lq]/32\[rq] for IPv4, \[lq]/128\[rq] for IPv6), but prints it
otherwise.
.PP
For instance, \[lq]198.51.100.1/32\[rq] will be printed as
\[lq]198.51.100.1\[rq], while \[lq]203.0.113.0/24\[rq] will still be
printed including the \[lq]/\[rq] suffix.
.PP
This option can be combined with the long-output \f[B]-l\f[R] option.
.RE
.TP
-s
strict - exit non-zero if host bits are set in parsed addresses
.RS
.PP
By default, network addresses get silently truncated to their prefix
length.
.RE
.SH EXIT CODES
.TP
0
success
.TP
1
unspecified error
.TP
64
usage error
.TP
65
failed to parse an input or purge network specification
.TP
70
software logic broken
.TP
71
failed to get system resources
.TP
73
failed to open output file
.TP
74
failed to open input file
.SH FILES
.TP
\f[I]/usr/local/share/ip-dedup\f[R]
input/purge files starting with a `\[at]' character are looked up
relative to this directory after removing the `\[at]'.
.SH BUGS
.PP
See GitHub Issues: <https://github.com/dywisor/ip-dedup/issues>
.SH AUTHOR
.PP
Andr\['e] Erdmann <dywi@mailerd.de>
